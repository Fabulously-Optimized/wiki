# Автообновление MultiMC

Это краткий FAQ об MultiMC (auto-update).

### Что это такое?

Это обычная сборка для MultiMC, которая запускает [packwiz](https://github.com/comp500/packwiz), инструмент для управления модами при каждом запуске. Это означает, что он будет добавлять и обновлять любые моды в соответствии с тем, что мы укажем в файле pack.toml.

### Как его установить?

Так же, как вы устанавливаете любую другую сборку в MultiMC - скачайте zip и перетащите в окно MultiMC.

### Как он обновляется?

Он спрашивает сервер, обновилась ли сборка _каждый раз, когда вы его запускаете_. Это означает, что вам нужен интернет для запуска, иначе вы получите ошибку (хотя вы можете просто скипнуть её).

Если обновления есть, они будут загружены и запущены, в противном случае будет запущена текущая игра.

Он автоматически _не_ обновляет отдельные моды, кроме тех, что установлены в модпаке. Это распространенное заблуждение, которое в любом случае может вызвать проблемы.

### Почему вы не распространяете его в CurseForge?

* Чтобы сохранить его видимым в списке файлов, мне пришлось бы перезагружать его каждый раз, когда мы обновляем сборку, что по факту нужно достаточно редко.
* Подобный способ [не монетизируется CurseForge](https://support.curseforge.com/en/support/solutions/articles/9000197898-rewards-program-terms-of-service#1.-Description-of-Rewards-Program), поэтому мы бы предпочли, чтобы его использовало только ограниченное количество технически-подкованных пользователей.
* Он все еще в некоторой степени экспериментальный и может иметь неожиданные проблемы или отличия от обычных паков, которые мы распространяем (CurseForge и MultiMC).

### Так почему вы вообще его сделали?

* Потому что у MultiMC всё-ещё этого нет, смотрите [issue #2640](https://github.com/MultiMC/MultiMC5/issues/2640) и [issue #3037](https://github.com/MultiMC/MultiMC5/issues/3057)
* Потому что разработчик планирует сделать установщик, использующий ту же систему, и для ванильного лаунчера, чего мы определенно хотим для FO
* Потому что это было предложено для этой сборки ранее, когда пользователь хотел обновиться без необходимости создавать отдельный профиль.

### Что произойдет, если выйдет новая версия Minecraft?

Вам придется скачать новую версию сборки, которая будет соответствовать данной версии Minecraft.

## Могу ли я отключить некоторые моды?

Официального способа для этого пока нет, но [RaptaG](https://github.com/RaptaG) и [Ultrasonic1209](https://github.com/Ultrasonic1209) сделали туториалы и скрипты для улучшенной версии [обхода Remty5](https://github.com/Fabulously-Optimized/fabulously-optimized/issues/81). Теперь пользователю нужно только заменить параметры сборки и перечислить моды, которые нужно отключить.

Если у вас возникли проблемы, вы можете обратиться за поддержкой на наш [Discord сервер](https://discord.gg/yxaXtaQqdB).

### Windows

Туториал и скрипты от [Ultrasonic1209](https://github.com/Ultrasonic1209).

1. Скачайте скрипты для отключения модов:
     1. Откройте MultiMC, щелкните правой кнопкой мыши на сборке и нажмите "Instance Folder".
     2. Внутри папки нажмите правую кнопку мыши и выберите "Открыть в терминале" (или эквивалентную подсказку PowerShell).
     3. В терминале выполните следующие команды для загрузки файлов.
 ```
(Invoke-WebRequest -Uri "https://raw.githubusercontent.com/Fabulously-Optimized/fabulously-optimized/main/Packwiz/pre-launch.ps1" -OutFile "pre-launch.ps1")
(Invoke-WebRequest -Uri "https://raw.githubusercontent.com/Fabulously-Optimized/fabulously-optimized/main/Packwiz/post-exit.ps1" -OutFile "post-exit.ps1")
```
   Если вы хотите установить их в другую папку, выполните команду `cd path\to\folder` (где `path\to\folder` - путь к нужной вам папке) перед выполнением вышеуказанной команды.

2. Выберите моды для отключения.
    1. Скопируйте название мода (модов), который вы хотите отключить.
    2. Откройте `pre-launch.ps1` любым текстовым редактором.
    3. В строке 4 дважды щелкните `mod1` и вставьте название мода, которое вы ранее скопировали. Вы можете сделать это и в строке 5! Если вы хотите отключить больше модов, скопируйте всю строку 5, нажмите клавишу `Enter` в конце строки 5 и нажмите вставить. (Не забудьте изменить название, чтобы оно соответствовало новому моду!)
        * Названия модов могут меняться с обновлением модпака, поэтому вам нужно будет обновить их и здесь.
  
3. Поставьте скрипты на запуск в MultiMC (auto-update).  
   1. Откройте MultiMC
   2. Нажмите на в вашей сборке "Edit Instance"
   3. Перейдите в "Settings", затем в "Custom Commands".
   4. Удалите команду pre-launch и замените ее на `powershell -ExecutionPolicy Bypass -File ..\pre-launch.ps1`.
       * Если вы установили его в другую папку, используйте `path\to\folder\pre-launch.ps1` (где `path\to\folder` - путь к папке).
   5. Сделайте то же самое для команды post-exit, но в этот раз используйте `powershell -ExecutionPolicy Bypass -File ..\post-exit.ps1`.
       * Или `path\to\folder\post-exit.ps1` (где `path\to\folder` - путь к папке).
4. Вот и все! Теперь моды, которые вы отключили, не будут запускаться вместе со сборкой и не появятся в меню модов!

### Linux, macOS

Туториал и скрипты от [RaptaG](https://github.com/RaptaG). Не полностью протестировано на macOS.

1. Откройте терминал и выполните следующую команду:
   * Arch Linux: `sudo pacman -S jq --needed`.
   * Debian-Ubuntu Linux: `sudo apt-get install jq`.
   * Fedora Linux: `sudo dnf install jq`
   * openSUSE Linux: `sudo zypper install jq`
   * Другие дистрибутивы/macOS: [следуйте этой инструкции](https://stedolan.github.io/jq/download/)

Это позволит установить программу под названием [jq](https://stedolan.github.io/jq/), необходимую для автоматической адаптации этого скрипта к любой версии Minecraft, которую вы используете.

2. Скачайте скрипты для отключения модов:
   1. Откройте MultiMC, щелкните правой кнопкой мыши по сборке и нажмите "Instance Folder".
   2. Внутри папки щелкните правой кнопкой мыши и выберите "Open Terminal here".
       * На macOS, [следуйте этой инструкции] (https://www.petenetlive.com/KB/Article/0001060).
   3. В терминале выполните следующую команду - это установит файлы и сделает их исполняемыми:
```shell
curl -Os https://raw.githubusercontent.com/Fabulously-Optimized/fabulously-optimized/main/Packwiz/pre-launch.sh | curl -Os https://raw.githubusercontent.com/Fabulously-Optimized/fabulously-optimized/main/Packwiz/post-exit.sh && chmod +x pre-launch.sh post-exit.sh
```
   Если вы хотите установить их в другую папку, выполните команду `cd /path/to/folder` (где `/path/to/folder` - путь к нужной вам папки) перед выполнением вышеприведенной команды.

3. Выберите моды для отключения
   1. Скопируйте название мода (модов), который вы хотите отключить.
   2. Откройте `pre-launch.sh` любым текстовым редактором
   3. Найдите строку "Select the mods you want to disable:" и ниже нее `mod0=`, `mod1=`, `mod2=`, `mod3=`, `mod4=` и `mod5=`. 
      После `=` поставьте названия модов, которые вы ранее скопировали, один за другим.
      * Независимо от того, сколько модов вы отключите, **никогда** не удаляйте `mod0=` и `$mod0.jar`. 
      * Названия модов могут меняться с обновлением модпака, поэтому вам нужно будет обновить и и здесь.

4. Поставьте скрипты на запуск в MultiMC (auto-update).  
   1. Откройте MultiMC
   2. Нажмите на в вашей сборке "Edit Instance"
   3. Перейдите в "Settings", затем в "Custom Commands".
   4. Удалите команду pre-launch и замените ее на `../pre-launch.sh`.
       * Если вы установили его в другую папку, используйте `/path/to/folder/pre-launch.sh` (где `/path/to/folder` - путь к папке).
   5. Сделайте то же самое для команды post-exit, но на этот раз используйте `../post-exit.sh`.
       * Или `path/to/folder/post-exit.sh` (где `/path/to/folder` - путь к папке).
5. Вот и все! Теперь моды, которые вы отключили, не будут запускаться вместе со сборкой и не появятся в меню модов!

**FAQ:**

Что делать, если я хочу отключить более или менее 6 модов?

* Удаление: Просто удалите лишние строки из начала и конца `pre-launch.sh`, например, из строк 10 и 11 `mod4=`, `mod5=` и `$mod4.jar\`, `$mod5.jar\` из строк 35 и 36, если вы хотите отключить 4 мода.
* Добавление: Нажмите `Enter` в конце строки 11 и введите `mod6=`, например. Затем, в конце строки 36, снова нажмите `Enter` и введите `$mod6.jar\`. Повторите то же самое для других модов, просто меняя номер (`mod6=` на `mod7=`, `$mod6.jar\` на `$mod7.jar\` и т.д.).
